<ion-content class="ion-padding">

  <ion-grid>
    <ion-row>
      <ion-col size="12" sizeMd="12" sizeSm="12" class="top-image ion-text-center ion-padding">
        <ion-img class="top-image" src="./../../assets/imgs/next-price-small-logo.svg"></ion-img>
      </ion-col>
      <ion-col size="12" sizeSm="12" sizeMd="12">
        <h1 class="ion-text-bold">Sign up</h1>
        <ion-text>
          <p class="">Let help spread the price of goods and services.</p>
        </ion-text>
      </ion-col>
    </ion-row>
  </ion-grid>

  <ion-grid>
    <ion-row>
      <ion-col sizeSm="12" sizeMd="6" offsetMd="3">
        <form [formGroup]="signUpForm">

          <ion-item class="box" lines="none"
            [ngClass]="{'error-box': signupFormData.firstName.dirty && signupFormData.firstName.invalid}">
            <ion-input type="text" placeholder="First name" formControlName="firstName"
              color="{{ (signupFormData.firstName.dirty && signupFormData.firstName.errors) ? 'danger' : '' }}"
              required></ion-input>
          </ion-item>
          <ion-text color="danger" *ngIf="signupFormData.firstName.dirty && signupFormData.firstName.errors">
            <p *ngIf="signupFormData.firstName.hasError('required')">First name is required</p>
          </ion-text>

          <ion-item class="box" lines="none"
            [ngClass]="{'error-box': (signupFormData.lastName.dirty) && signupFormData.lastName.invalid}">
            <ion-input type="text" placeholder="Last name" formControlName="lastName"
              color="{{ ((signupFormData.lastName.dirty) && signupFormData.lastName.errors) ? 'danger' : '' }}">
            </ion-input>
          </ion-item>
          <ion-text color="danger" *ngIf="(signupFormData.lastName.dirty) && signupFormData.lastName.errors">
            <p *ngIf="signupFormData.lastName.hasError('required')">Last name is required</p>
          </ion-text>


          <ion-item class="box" lines="none"
            [ngClass]="{'error-box': (signupFormData.email.dirty && signupFormData.email.errors)}">
            <ion-input type="email" placeholder="Email" formControlName="email"
              color="{{ ((signupFormData.email.dirty) && signupFormData.email.invalid) ? 'danger' : '' }}">
            </ion-input>
          </ion-item>
          <ion-text color="danger" *ngIf="signupFormData.email.dirty && signupFormData.email.errors">
            <p *ngIf="signupFormData.email.hasError('required')">Email is required</p>
            <p *ngIf="signupFormData.email.hasError('email')">Email is invalid</p>
          </ion-text>

          <ion-item class="box" lines="none"
            [ngClass]="{'error-box': (signupFormData.phoneNumber.dirty && signupFormData.phoneNumber.errors)}">
            <ion-input type="tel" placeholder="Phone number" formControlName="phoneNumber"
              [color]="(signupFormData.phoneNumber.dirty && signupFormData.phoneNumber.errors) ? 'danger' : ''">
            </ion-input>
          </ion-item>
          <ion-text color="danger" *ngIf="signupFormData.phoneNumber.dirty && signupFormData.phoneNumber.errors">
            <p *ngIf="signupFormData.phoneNumber.hasError('required')">Phone number is required</p>
            <p *ngIf="signupFormData.phoneNumber.errors.pattern">Phone number is invalid</p>
          </ion-text>

          <ion-item class="box" lines="none" [ngClass]="{'error-box':signupFormData.password.dirty
            && signupFormData.password.errors}">
            <ion-input [type]="showPassword ? 'text': 'password'" placeholder="Password" formControlName="password"
              [color]="(signupFormData.password.dirty && signupFormData.password.errors) ? 'danger' : ''"></ion-input>
            <ion-icon *ngIf="!showPassword" color="primary" (click)="funShowPassword()" name="eye-outline"></ion-icon>
            <ion-icon *ngIf="showPassword" color="primary" (click)="funShowPassword()" name="eye-off-outline">
            </ion-icon>
          </ion-item>
          <ion-text *ngIf="signupFormData.password.dirty && signupFormData.password?.errors" color="danger">
            <p *ngIf="signupFormData.password.hasError('required')">Password is required</p>
            <!-- <p *ngIf="signupFormData.password.invalid">Password is required</p> -->
            <p *ngIf="signupFormData.password.errors?.minlength">Minimum password length is 6</p>
            <p *ngIf="signupFormData.password.errors?.maxlength">Maximum password length is 16</p>
          </ion-text>

          <ion-button [disabled]="signUpForm.invalid" class="mt-5" size="large" color="dark" expand="block">
            <ion-spinner *ngIf="isLoading" slot="start" color="light" name="bubbles"></ion-spinner>
            Register
          </ion-button>
        </form>
      </ion-col>
    </ion-row>
  </ion-grid>

  <p class="ion-text-center"> Already have an account? <span class="link" [routerLink]="['/login']">Login</span> </p>

  <div class="ion-padding-top ion-padding-bottom ion-text-center">
    <ion-text class="ion-padding-top ion-text-center">Help a neighbour to know the prices</ion-text>
  </div>
</ion-content>
